<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>cdn-webcache: ngx_http_tcdn_webcache_module.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">cdn-webcache
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_0e8c1dc6530f68cff44f0140280dd8b0.html">rpm</a></li><li class="navelem"><a class="el" href="dir_8cafc044eafd81c1bc2aa589e35b861a.html">SOURCES</a></li><li class="navelem"><a class="el" href="dir_6900ec0c51eb5141895519586ebf9ee6.html">modules</a></li><li class="navelem"><a class="el" href="dir_f22b112a0db27b9939a8ecc7ac150ed4.html">tcdn_webcache</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ngx_http_tcdn_webcache_module.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>TCDN-webcache module for Nginx.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;ngx_config.h&gt;</code><br />
<code>#include &lt;ngx_core.h&gt;</code><br />
<code>#include &lt;ngx_http.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ngx_http_tcdn_webcache_module.c:</div>
<div class="dyncontent">
<div class="center"><img src="ngx__http__tcdn__webcache__module_8c__incl.png" border="0" usemap="#ngx__http__tcdn__webcache__module_8c" alt=""/></div>
</div>
</div>
<p><a href="ngx__http__tcdn__webcache__module_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structngx__http__tcdn__webcache__loc__conf__s.html">ngx_http_tcdn_webcache_loc_conf_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsync__tracker__thr__ctx__s.html">sync_tracker_thr_ctx_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a4ca78cacaea6e9411d50a8bc3fd83f75"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngx__http__tcdn__webcache__module_8c.html#a4ca78cacaea6e9411d50a8bc3fd83f75">ENABLE_DEBUG_LOGS</a></td></tr>
<tr class="separator:a4ca78cacaea6e9411d50a8bc3fd83f75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a3bff707b06f72f9b956b01259eecb0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngx__http__tcdn__webcache__module_8c.html#a7a3bff707b06f72f9b956b01259eecb0">LOGD</a>(NGX_LOG, ...)</td></tr>
<tr class="separator:a7a3bff707b06f72f9b956b01259eecb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c71a346e1280fe78e59e2e909dbf53e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngx__http__tcdn__webcache__module_8c.html#a6c71a346e1280fe78e59e2e909dbf53e">CHECK_DO</a>(COND,  ACTION)</td></tr>
<tr class="separator:a6c71a346e1280fe78e59e2e909dbf53e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a50235f4fee163761387726e159bf6946"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structngx__http__tcdn__webcache__loc__conf__s.html">ngx_http_tcdn_webcache_loc_conf_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngx__http__tcdn__webcache__module_8c.html#a50235f4fee163761387726e159bf6946">ngx_http_tcdn_webcache_loc_conf_t</a></td></tr>
<tr class="separator:a50235f4fee163761387726e159bf6946"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c354a254db582224ab9aab2992cab51"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structsync__tracker__thr__ctx__s.html">sync_tracker_thr_ctx_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngx__http__tcdn__webcache__module_8c.html#a1c354a254db582224ab9aab2992cab51">sync_tracker_thr_ctx_t</a></td></tr>
<tr class="separator:a1c354a254db582224ab9aab2992cab51"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a287d9e7a7069dad9404420a470989ec6"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngx__http__tcdn__webcache__module_8c.html#a287d9e7a7069dad9404420a470989ec6">ngx_http_tcdn_webcache_create_conf</a> (ngx_conf_t *ngx_conf)</td></tr>
<tr class="separator:a287d9e7a7069dad9404420a470989ec6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88ddc377ed25c01676820cc1e66432d5"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngx__http__tcdn__webcache__module_8c.html#a88ddc377ed25c01676820cc1e66432d5">ngx_http_tcdn_webcache_merge_conf</a> (ngx_conf_t *ngx_conf, void *parent, void *child)</td></tr>
<tr class="separator:a88ddc377ed25c01676820cc1e66432d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef06b90db04f622a87b3f63fc856a4d6"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngx__http__tcdn__webcache__module_8c.html#aef06b90db04f622a87b3f63fc856a4d6">ngx_http_tcdn_webcache_set_handler</a> (ngx_conf_t *ngx_conf, ngx_command_t *ngx_command, void *opaque_loc_conf)</td></tr>
<tr class="separator:aef06b90db04f622a87b3f63fc856a4d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a869f9236672a1ed514370ec2be50207f"><td class="memItemLeft" align="right" valign="top">static ngx_int_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngx__http__tcdn__webcache__module_8c.html#a869f9236672a1ed514370ec2be50207f">ngx_http_tcdn_webcache_handler</a> (ngx_http_request_t *r)</td></tr>
<tr class="separator:a869f9236672a1ed514370ec2be50207f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d3dbf0946120bd716daae4d2b9741f3"><td class="memItemLeft" align="right" valign="top">static ngx_int_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngx__http__tcdn__webcache__module_8c.html#a3d3dbf0946120bd716daae4d2b9741f3">sync_tracker_task_offload</a> (<a class="el" href="ngx__http__tcdn__webcache__module_8c.html#a50235f4fee163761387726e159bf6946">ngx_http_tcdn_webcache_loc_conf_t</a> *loc_conf, ngx_log_t *ngx_log)</td></tr>
<tr class="separator:a3d3dbf0946120bd716daae4d2b9741f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04e6d58884c6387c0e5c72a0e720a0a1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngx__http__tcdn__webcache__module_8c.html#a04e6d58884c6387c0e5c72a0e720a0a1">sync_tracker_thr</a> (void *data, ngx_log_t *log_arg)</td></tr>
<tr class="separator:a04e6d58884c6387c0e5c72a0e720a0a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaff59d3b256a188168898f3c90677fee"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngx__http__tcdn__webcache__module_8c.html#aaff59d3b256a188168898f3c90677fee">sync_tracker_thr_completion</a> (ngx_event_t *ev)</td></tr>
<tr class="separator:aaff59d3b256a188168898f3c90677fee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad47e068b5af6207ae64febf792480cd5"><td class="memItemLeft" align="right" valign="top">static ngx_command_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngx__http__tcdn__webcache__module_8c.html#ad47e068b5af6207ae64febf792480cd5">ngx_http_tcdn_webcache_commands</a> []</td></tr>
<tr class="separator:ad47e068b5af6207ae64febf792480cd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e49aecfdd00d8ce4d031a420167c766"><td class="memItemLeft" align="right" valign="top">static ngx_http_module_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngx__http__tcdn__webcache__module_8c.html#a2e49aecfdd00d8ce4d031a420167c766">ngx_http_tcdn_webcache_module_ctx</a></td></tr>
<tr class="separator:a2e49aecfdd00d8ce4d031a420167c766"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62111a19c14b897670e142013408c322"><td class="memItemLeft" align="right" valign="top">ngx_module_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngx__http__tcdn__webcache__module_8c.html#a62111a19c14b897670e142013408c322">ngx_http_tcdn_webcache_module</a></td></tr>
<tr class="separator:a62111a19c14b897670e142013408c322"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed3fd45f22376b27c412dbb377192a9f"><td class="memItemLeft" align="right" valign="top">static unsigned char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ngx__http__tcdn__webcache__module_8c.html#aed3fd45f22376b27c412dbb377192a9f">thread_pool_name_cstr</a></td></tr>
<tr class="separator:aed3fd45f22376b27c412dbb377192a9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>TCDN-webcache module for Nginx. </p>
<dl class="section author"><dt>Author</dt><dd>Rafael Antoniello </dd></dl>
<dl class="section date"><dt>Date</dt><dd>March, 2018 </dd></dl>

<p>Definition in file <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html">ngx_http_tcdn_webcache_module.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a6c71a346e1280fe78e59e2e909dbf53e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CHECK_DO</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">COND, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ACTION&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">if</span>(!(COND)) {\</div><div class="line">        ngx_log_error(NGX_LOG_ERR, ngx_log, 0, \</div><div class="line">            <span class="stringliteral">&quot;%s:%d: Check point failed.\n&quot;</span>, __FILE__, __LINE__);\</div><div class="line">        ACTION;\</div><div class="line">    }</div></div><!-- fragment --><p>Generic trace for tracking check-points failures. Thought to be enabled even in release version. </p>

<p>Definition at line <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html#l00051">51</a> of file <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html">ngx_http_tcdn_webcache_module.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4ca78cacaea6e9411d50a8bc3fd83f75"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENABLE_DEBUG_LOGS</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Logs for local debugging. Un-comment 'ENABLE_DEBUG_LOGS' to trace. Disable on release version. </p>

<p>Definition at line <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html#l00023">23</a> of file <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html">ngx_http_tcdn_webcache_module.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7a3bff707b06f72f9b956b01259eecb0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOGD</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">NGX_LOG, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">if</span>((NGX_LOG)) { \</div><div class="line">        ngx_log_error(NGX_LOG_ERR, NGX_LOG, 0, <span class="stringliteral">&quot;\n%s:%d: &quot;</span>, \</div><div class="line">                __FILE__, __LINE__); \</div><div class="line">        ngx_log_error(NGX_LOG_ERR, NGX_LOG, 0, ##__VA_ARGS__); \</div><div class="line">    }</div></div><!-- fragment --><p>Log macro for locally debugging. We directly use 'ngx_log_error' as it is used internally for debugging tracing functions (see for example 'ngx_log_debug'). Un-comment 'ENABLE_DEBUG_LOGS' to trace. Disable on release version. </p>

<p>Definition at line <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html#l00031">31</a> of file <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html">ngx_http_tcdn_webcache_module.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a50235f4fee163761387726e159bf6946"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structngx__http__tcdn__webcache__loc__conf__s.html">ngx_http_tcdn_webcache_loc_conf_s</a>  <a class="el" href="ngx__http__tcdn__webcache__module_8c.html#a50235f4fee163761387726e159bf6946">ngx_http_tcdn_webcache_loc_conf_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>TCDN-webcache module's location configuration context structure. The fields in this structure are thought to be initially configured through Nginx's configuration file, and lately by any other dynamic run-time mean. Apart from configurations settings, this structure will also hold status or data fields to be used persistently by this module. </p>

</div>
</div>
<a class="anchor" id="a1c354a254db582224ab9aab2992cab51"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structsync__tracker__thr__ctx__s.html">sync_tracker_thr_ctx_s</a>  <a class="el" href="ngx__http__tcdn__webcache__module_8c.html#a1c354a254db582224ab9aab2992cab51">sync_tracker_thr_ctx_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tracker synchronization thread context structure. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a287d9e7a7069dad9404420a470989ec6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void * ngx_http_tcdn_webcache_create_conf </td>
          <td>(</td>
          <td class="paramtype">ngx_conf_t *&#160;</td>
          <td class="paramname"><em>ngx_conf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Allocates and initializes location configuration context structure. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ngx_conf</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html#l00232">232</a> of file <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html">ngx_http_tcdn_webcache_module.c</a>.</p>

</div>
</div>
<a class="anchor" id="a869f9236672a1ed514370ec2be50207f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ngx_int_t ngx_http_tcdn_webcache_handler </td>
          <td>(</td>
          <td class="paramtype">ngx_http_request_t *&#160;</td>
          <td class="paramname"><em>r</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Module's request-handler function. Nginx's handlers typically do four things:</p><ol type="1">
<li>get the location configuration,</li>
<li>generate an appropriate response,</li>
<li>send the response header,</li>
<li>and send the body.</li>
</ol>
<p>Alternatively, response can be delegated to a proxy server either by using an internal redirection (see 'ngx_http_internal_redirect()') or by performing a so-called sub-request ('ngx_http_subrequest'). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">r</td><td>HTTP request context structure (includes information such as request method, URI, and headers). </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html#l00325">325</a> of file <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html">ngx_http_tcdn_webcache_module.c</a>.</p>

</div>
</div>
<a class="anchor" id="a88ddc377ed25c01676820cc1e66432d5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * ngx_http_tcdn_webcache_merge_conf </td>
          <td>(</td>
          <td class="paramtype">ngx_conf_t *&#160;</td>
          <td class="paramname"><em>ngx_conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>child</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Merge location configuration context structure. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ngx_conf</td><td></td></tr>
    <tr><td class="paramname">parent</td><td></td></tr>
    <tr><td class="paramname">child</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html#l00267">267</a> of file <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html">ngx_http_tcdn_webcache_module.c</a>.</p>

</div>
</div>
<a class="anchor" id="aef06b90db04f622a87b3f63fc856a4d6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * ngx_http_tcdn_webcache_set_handler </td>
          <td>(</td>
          <td class="paramtype">ngx_conf_t *&#160;</td>
          <td class="paramname"><em>ngx_conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ngx_command_t *&#160;</td>
          <td class="paramname"><em>ngx_command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>opaque_loc_conf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Module's request-handler setter function. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ngx_conf</td><td></td></tr>
    <tr><td class="paramname">ngx_command</td><td></td></tr>
    <tr><td class="paramname">opaque_loc_conf</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html#l00289">289</a> of file <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html">ngx_http_tcdn_webcache_module.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3d3dbf0946120bd716daae4d2b9741f3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static ngx_int_t sync_tracker_task_offload </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ngx__http__tcdn__webcache__module_8c.html#a50235f4fee163761387726e159bf6946">ngx_http_tcdn_webcache_loc_conf_t</a> *&#160;</td>
          <td class="paramname"><em>loc_conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ngx_log_t *&#160;</td>
          <td class="paramname"><em>ngx_log</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Tracker synchronization off-load task function. This function allocates and initializes the related resources to finally launch the off-load task in a parallel thread of the thread-pool defined for this module. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">loc_conf</td><td>Module's location configuration structure. </td></tr>
    <tr><td class="paramname">ngx_log</td><td>Nginx's log context structure. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html#l00436">436</a> of file <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html">ngx_http_tcdn_webcache_module.c</a>.</p>

</div>
</div>
<a class="anchor" id="a04e6d58884c6387c0e5c72a0e720a0a1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sync_tracker_thr </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ngx_log_t *&#160;</td>
          <td class="paramname"><em>log_arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Tracker synchronization thread function. This function is executed in a separate thread of the available thread-pool. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Opaque pointer to our private thread context structure; that is, 'sync_tracker_thr_ctx_t'. </td></tr>
    <tr><td class="paramname">log_arg</td><td>Nginx's log context structure. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html#l00387">387</a> of file <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html">ngx_http_tcdn_webcache_module.c</a>.</p>

</div>
</div>
<a class="anchor" id="aaff59d3b256a188168898f3c90677fee"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sync_tracker_thr_completion </td>
          <td>(</td>
          <td class="paramtype">ngx_event_t *&#160;</td>
          <td class="paramname"><em>ev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Tracker synchronization thread completion function. This callback is called just after associated off-load thread has finished. Important note: it is to remark that this function <em>IS</em> executed <em>WITHIN</em> Nginx event loop (not in parallel), so it must be no blocking. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ev</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html#l00412">412</a> of file <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html">ngx_http_tcdn_webcache_module.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ad47e068b5af6207ae64febf792480cd5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ngx_command_t ngx_http_tcdn_webcache_commands[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">        {</div><div class="line">                ngx_string(<span class="stringliteral">&quot;tcdn_webcache&quot;</span>),</div><div class="line">                NGX_HTTP_LOC_CONF|NGX_CONF_NOARGS,</div><div class="line">                <a class="code" href="ngx__http__tcdn__webcache__module_8c.html#aef06b90db04f622a87b3f63fc856a4d6">ngx_http_tcdn_webcache_set_handler</a>,</div><div class="line">                NGX_HTTP_LOC_CONF_OFFSET,</div><div class="line">                0,</div><div class="line">                NULL</div><div class="line">        },</div><div class="line">        ngx_null_command</div><div class="line">}</div><div class="ttc" id="ngx__http__tcdn__webcache__module_8c_html_aef06b90db04f622a87b3f63fc856a4d6"><div class="ttname"><a href="ngx__http__tcdn__webcache__module_8c.html#aef06b90db04f622a87b3f63fc856a4d6">ngx_http_tcdn_webcache_set_handler</a></div><div class="ttdeci">static char * ngx_http_tcdn_webcache_set_handler(ngx_conf_t *ngx_conf, ngx_command_t *ngx_command, void *opaque_loc_conf)</div><div class="ttdef"><b>Definition:</b> <a href="ngx__http__tcdn__webcache__module_8c_source.html#l00289">ngx_http_tcdn_webcache_module.c:289</a></div></div>
</div><!-- fragment --><p>TCDN-webcache module's directives:<br />
 Define a set of "commands" this module will be able to handle. Each command is represented by the structure type 'ngx_command_t' in which it is specified: </p><ul>
<li>
The directive's name (string with no spaces):<br />
 it will be referenced in Nginx's configuration file, for example, as follows: <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;location / {</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    my_directive_name my_directive_arg;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    ...</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;}</div></div><!-- fragment -->  </li>
<li>
The directive type (string with no spaces):<br />
 The type refers to a set of flags that indicate where the directive is legal (e.g. NGX_HTTP_(MAIN/SRV/LOC/...)_CONF to indicate the directive is valid in the main/server/location/... configuration respectively) and how many arguments the directive takes (e.g. NGX_CONF_(NOARGS/TAKE1/TAKE7/...). <br />
 Please refer to 'core/ngx_conf_file.h' (<a href="https://github.com/nginx/nginx/blob/master/src/core/ngx_conf_file.h">https://github.com/nginx/nginx/blob/master/src/core/ngx_conf_file.h</a>).  </li>
<li>
The 'set' callback:<br />
 Pointer to a function for setting up part of the module’s configuration; typically this function will translate the arguments passed to this directive and save an appropriate value in its configuration structure. This setup function will be called when the directive is encountered.  </li>
<li>
Configuration structure identifier:<br />
 This identifier is used to indicate to the 'set' callback in which configuration structure to save/store the data; namely, it tells Nginx whether a value will get saved to the module’s main configuration, server configuration, or location configuration (with NGX_HTTP_MAIN_CONF_OFFSET, NGX_HTTP_SRV_CONF_OFFSET or NGX_HTTP_LOC_CONF_OFFSET respectively).  </li>
<li>
<p class="startli">Configuration structure offset:<br />
 Specifies which field of the identified configuration structure to write to. </p>
<p class="endli"></p>
</li>
</ul>

<p>Definition at line <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html#l00138">138</a> of file <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html">ngx_http_tcdn_webcache_module.c</a>.</p>

</div>
</div>
<a class="anchor" id="a62111a19c14b897670e142013408c322"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ngx_module_t ngx_http_tcdn_webcache_module</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">        NGX_MODULE_V1,</div><div class="line">        &amp;<a class="code" href="ngx__http__tcdn__webcache__module_8c.html#a2e49aecfdd00d8ce4d031a420167c766">ngx_http_tcdn_webcache_module_ctx</a>, </div><div class="line">        <a class="code" href="ngx__http__tcdn__webcache__module_8c.html#ad47e068b5af6207ae64febf792480cd5">ngx_http_tcdn_webcache_commands</a>,    </div><div class="line">        NGX_HTTP_MODULE,                    </div><div class="line">        NULL,                               </div><div class="line">        NULL,                               </div><div class="line">        NULL,                               </div><div class="line">        NULL,                               </div><div class="line">        NULL,                               </div><div class="line">        NULL,                               </div><div class="line">        NULL,                               </div><div class="line">        NGX_MODULE_V1_PADDING</div><div class="line">}</div><div class="ttc" id="ngx__http__tcdn__webcache__module_8c_html_ad47e068b5af6207ae64febf792480cd5"><div class="ttname"><a href="ngx__http__tcdn__webcache__module_8c.html#ad47e068b5af6207ae64febf792480cd5">ngx_http_tcdn_webcache_commands</a></div><div class="ttdeci">static ngx_command_t ngx_http_tcdn_webcache_commands[]</div><div class="ttdef"><b>Definition:</b> <a href="ngx__http__tcdn__webcache__module_8c_source.html#l00138">ngx_http_tcdn_webcache_module.c:138</a></div></div>
<div class="ttc" id="ngx__http__tcdn__webcache__module_8c_html_a2e49aecfdd00d8ce4d031a420167c766"><div class="ttname"><a href="ngx__http__tcdn__webcache__module_8c.html#a2e49aecfdd00d8ce4d031a420167c766">ngx_http_tcdn_webcache_module_ctx</a></div><div class="ttdeci">static ngx_http_module_t ngx_http_tcdn_webcache_module_ctx</div><div class="ttdef"><b>Definition:</b> <a href="ngx__http__tcdn__webcache__module_8c_source.html#l00157">ngx_http_tcdn_webcache_module.c:157</a></div></div>
</div><!-- fragment --><p>TCDN-webcache module context structure. The nomenclature is always<br />
 'ngx_http_&lt;module name&gt;_module'.<br />
 This is where all references to the contexts and directives go, as well as other callbacks (exit thread, exit process, etc.). </p>

<p>Definition at line <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html#l00175">175</a> of file <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html">ngx_http_tcdn_webcache_module.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2e49aecfdd00d8ce4d031a420167c766"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ngx_http_module_t ngx_http_tcdn_webcache_module_ctx</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">        NULL, </div><div class="line">        NULL, </div><div class="line">        NULL, </div><div class="line">        NULL, </div><div class="line">        NULL, </div><div class="line">        NULL, </div><div class="line">        <a class="code" href="ngx__http__tcdn__webcache__module_8c.html#a287d9e7a7069dad9404420a470989ec6">ngx_http_tcdn_webcache_create_conf</a>, </div><div class="line">        <a class="code" href="ngx__http__tcdn__webcache__module_8c.html#a88ddc377ed25c01676820cc1e66432d5">ngx_http_tcdn_webcache_merge_conf</a> </div><div class="line">}</div><div class="ttc" id="ngx__http__tcdn__webcache__module_8c_html_a88ddc377ed25c01676820cc1e66432d5"><div class="ttname"><a href="ngx__http__tcdn__webcache__module_8c.html#a88ddc377ed25c01676820cc1e66432d5">ngx_http_tcdn_webcache_merge_conf</a></div><div class="ttdeci">static char * ngx_http_tcdn_webcache_merge_conf(ngx_conf_t *ngx_conf, void *parent, void *child)</div><div class="ttdef"><b>Definition:</b> <a href="ngx__http__tcdn__webcache__module_8c_source.html#l00267">ngx_http_tcdn_webcache_module.c:267</a></div></div>
<div class="ttc" id="ngx__http__tcdn__webcache__module_8c_html_a287d9e7a7069dad9404420a470989ec6"><div class="ttname"><a href="ngx__http__tcdn__webcache__module_8c.html#a287d9e7a7069dad9404420a470989ec6">ngx_http_tcdn_webcache_create_conf</a></div><div class="ttdeci">static void * ngx_http_tcdn_webcache_create_conf(ngx_conf_t *ngx_conf)</div><div class="ttdef"><b>Definition:</b> <a href="ngx__http__tcdn__webcache__module_8c_source.html#l00232">ngx_http_tcdn_webcache_module.c:232</a></div></div>
</div><!-- fragment --><p>TCDN-webcache module's configuration functions context structure. It defines the set of callback functions for creating the three configurations (main, server and location) and merging them together. (refer to 'ngx_http_config.h'; <a href="https://github.com/nginx/nginx/blob/master/src/http/ngx_http_config.h">https://github.com/nginx/nginx/blob/master/src/http/ngx_http_config.h</a>) </p>

<p>Definition at line <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html#l00157">157</a> of file <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html">ngx_http_tcdn_webcache_module.c</a>.</p>

</div>
</div>
<a class="anchor" id="aed3fd45f22376b27c412dbb377192a9f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char* thread_pool_name_cstr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)</div><div class="line">        <span class="stringliteral">&quot;tcdn_webcache_thread_pool&quot;</span></div></div><!-- fragment --><p>Thread-pool unambiguous identification name. This name is used in the Nginx's configuration file to set the thread-pool characteristics. The configuration syntax is the following (set in the main context):<br />
 thread_pool name threads=number [max_queue=number];<br />
 For example: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;thread_pool tcdn_webcache_thread_pool threads=32 max_queue=65536;</div></div><!-- fragment --> 
<p>Definition at line <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html#l00225">225</a> of file <a class="el" href="ngx__http__tcdn__webcache__module_8c_source.html">ngx_http_tcdn_webcache_module.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
